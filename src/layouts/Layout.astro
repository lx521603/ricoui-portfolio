---
import Meta from './Meta.astro';
import TopBg from "@/components/ui/TopBg.astro";
import Footer from "@/components/sections/Footer.astro";
import Header from "@/components/sections/Header.astro";
import TrackGa from "@/components/widgets/TrackGa.astro";

interface Props {
	title?: string | undefined;
	description?: string | undefined;
	keywords?: string | undefined;
}

const {
	title,
	description,
	keywords
} = Astro.props;

// Astro/Vite 将自动处理这些导入，并在 <head> 中生成阻塞渲染的 <link rel="stylesheet">
// 我们暂时保留这种阻塞，以确保样式不丢失。
import "../styles/global.css";
import "aos/dist/aos.css";
import "../styles/aos-custom.css";
import '../styles/article.css';
import '../styles/article-enhancements.css';
---

<html lang="">
  <head>
    <meta charset="UTF-8" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link 
      rel="stylesheet" 
      href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap"
    >
    <link 
      rel="stylesheet" 
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    >

    <Meta
      title = {title}
      description = {description}
      keywords = {keywords}
    />
    <TrackGa />
    
    <script is:inline>
      if (typeof Storage !== 'undefined') {
        if (
          localStorage.getItem('dark_mode') &&
          localStorage.getItem('dark_mode') == 'true'
        ) {
          document.documentElement.classList.add('dark')
        }
      }
    </script>

    <link rel="icon" type="image/x-icon" href="/favicon.png" />
  </head>
  <body class="antialiased bg-bg-primary dark:bg-bg-primary-dark max-w-full overflow-x-hidden">
    <TopBg />
    <Header />
    <slot />
    <Footer />
    
    <script src="../assets/js/main.js" defer></script>
  </body>
</html>
